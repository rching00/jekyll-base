<!DOCTYPE html>
<html>

  {% include head.html %}

  <body>

    {% include header.html %}
    <script src="https://chat-assets.frontapp.com/v1/chat.bundle.js"></script>
    <script>
      window.FrontChat('init', {chatId: '0fc7e3228dbc875e4e1fb2367c367c7f', useDefaultLauncher: true});
    </script>
        <button id="assign">Assign to me</button>
        <button id="tag">Add Tag</button>
          <script type="text/javascript">
          // window.Front is now available.
          const assignButton = document.getElementById('assign');
          const tagButton = document.getElementById('tag');

          Front.contextUpdates.subscribe(context => {
            //assignButton.removeEventListener('click',_assign);
            //Try adding code into eventListener
            switch(context.type) {
              case 'noConversation':
                console.log('No conversation selected');
                break;

              case 'singleConversation':
                console.log('Selected conversation:', context.conversation);
                assignButton.addEventListener('click', function _assign(){
                  Front.assign(context.teammate.id)
                });
                tagButton.addEventListener('click',function _tag()){
                  Front.tag(60751629)
                });
                break;

              case 'multiConversations':
                console.log('Multiple conversations selected', context.conversations);
                break;

              default:
                console.error(`Unsupported context type: ${context.type}`);
                break;
              }
            });
    </script>

    <div class="page-content">
      <div class="wrapper">
        {{ content }}
      </div>
    </div>

    {% include footer.html %}

  </body>

</html>
